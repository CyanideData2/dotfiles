(include system_symbols.kbd)
(defcfg
  process-unmapped-keys yes
  block-unmapped-keys yes
  ;; override-release-on-activation yes
)

;; (defsrc
;;   tab       q   w   e   r   t     y   u   i   o   p   [   home
;;   caps      a   s   d   f   g     h   j   k   l   ;   '
;;   lsft      z   x   c   v   b     n   m   ,   .   /   rsft
;;                   lmet lalt   spc   ralt <
;; )
(defsrc
  1       2     3   4   5   6     7   8   9   0   -   =       home
  tab     q     w   e   r   t     u   i   o   p   [   ]
  caps    a     s   d   f   g     j   k   l   ;   '   ret
                x   c   v         n   m   ,
)
(deflayer colemak
  @tabctrl   q   w   f   p   b     j   l   u   y   '   bspc    @layouts 
  @escctrl   a   r   s   t   g     m   n   e   i   o   @retctrl
  lsft      z   x   c   d   v     k   h   @,  @.  /   rsft
             @sym @metaccent @oscontrol    @metaccent spc @sym
)
(deflayer accents
  _         _  _  _  _ _   _ _  @Ãº _  `  _  _
  _         @Ã¡ _  _  _ _   _ @Ã± @Ã© @Ã­ @Ã³ _
  _         @Ã  _  @Ã§ _ _   _ _  _ _ _  _
                      _ _ _   _ _ _
)
(deflayer numsym
  @~    @!  @@  @#  @$  @%      @^ 7 8 9 @& _  _
  @|    <  @lp  @[   @{  =      + 4 5 6 @-  @*
  (layer-while-held reversenum) @>   _  _   _   _       _  1 2 3 \ (layer-while-held reversenum)
                      _ _ _   _ 0 0
)
(deflayer reversenum
  _   _ _ _ _ _         _ _ _ _ _   _  _
  _   @> @rp @] @} -    _ _ _ _ S--   _
  _   _ _ _ _ _         _ _ _ _ _   _
                _ _ _   _ _ _
)
(deflayer oscontrol
  _   _ ðŸ”… ðŸ”† _ _   â—€  â–²  ðŸ”‰ ðŸ”Š  ðŸ”‰ _  _
  _   _ _  _  _ _   _  _ _    _ _
  _   _ _  _  _ _   _  â–¼  â–¶  _ _ _   _
          _ _ _   _ _  _
)

(deflayermap (shift-exceptions)
, (multi (release-key sft) ;)
. S-;
)

(defvar
  doubletap-timeout 100
  hold-timeout 150
  dt $doubletap-timeout
  ht $hold-timeout
)
(defalias
  sft (multi lsft (layer-while-held shift-exceptions))
  oscontrol (layer-while-held oscontrol)
  escctrl (tap-hold-press $dt 300 esc lctrl)
  retctrl(tap-hold-press $dt 300 return rctrl)
  sftrev (tap-hold-press $dt 300 ` rsft)
  metaccent (tap-hold 100 $ht (one-shot-press 300 (layer-while-held accents)) lmet )
  tabctrl (tap-hold 100 $ht tab lctrl)
  bspcalt (tap-hold 100 $ht bspc rctrl)
  sym (layer-while-held numsym)
  layouts lrpv
)
(deflayer empty
  _   _ _ _ _ _   _ _ _ _ _   _  _
  _   _ _ _ _ _   _ _ _ _ _   _
  _   _ _ _ _ _   _ _ _ _ _   _
          _ _ _   _ _ _
)
